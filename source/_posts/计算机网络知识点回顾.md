---
title: 计算机网络知识点回顾
date: 2024-2-1 8:25:00
update: 2023-8-25 8:25:00
tags: 计算机网络
cover: https://images5.alphacoders.com/124/thumbbig-1240551.webp
---

# 一、基础篇
## TCP/IP四层模型
应用层 --> 传输层 --> 网络层 --> 网络接口层

1、应用层

应用层专注为用户提供应用功能，如HTTP、FTP、Telnet、DNS、SMTP等。应用层工作在用户态下，而以下层工作在内核态下。

2、传输层

TCP/UDP就位于传输层。

TCP是可靠传输，有流量控制，超时重传，拥塞控制等特性；UDP是不可靠传输，只负责发送数据包，不保证其是否能安全抵达，因此其实时性更好、传输效率更高。

当应用层传来的数据超过MSS时，就要对数据进行分段，在TCP中，每一个称为TCP Segment。这样即使有分段丢失，可以重新传送，不用重发整个数据包。同时，当传输层要往应用层传数据时，用端口号将不同应用区分。特定的服务一般有特定的端口号，而浏览器中的每一个标签都是一个单独的进程，os会为这些进程临时分配端口号。

3、网络层

网络层通常使用的是IP协议。IP 协议会将传输层的报文作为数据部分，再加上 IP 包头组装成 IP 报文，如果 IP 报文大小超过 MTU（以太网中一般为 1500 字节）就会再次进行分片，得到一个即将发送到网络的 IP 报文。

IP地址分为两部分：网络号 + 主机号。将IP地址和子网掩码进行按位与运算，可以得到网络号，将子网掩码取反后，再和IP地址按位与，可以得到主机号。

寻址过程中，先找到对应的子网，再在对应子网下查找主机。

IP还有一个能力就是路由。在网络中，两个设备之间可能要通过很多网关、路由器、交换机联系在一起。当数据包到达一个网络节点，就要根据路由算法来决定下一个目的地。

4、网络接口层

在IP头部前再加上MAC头，形成数据帧，发送到网络上。

MAC头部是以太网使用的头部，包含收发双方的MAC地址，可以通过ARP协议获得对方的MAC地址。

网络接口层主要为网络层提供链路级别的传输服务，负责在以太网、WiFi这种底层网络上传输数据，工作在网卡这个层次，使用MAC地址来标识网络上的设备。

# 二、TCP篇
## TCP三次握手
- 一开始，客户端和服务端都处于CLOSE状态，先是服务端主动监听某个端口，处于LISTEN状态。
- 客户端随机初始化序列号client-isn，将序号置于TCP首部，然后将TCP首部中的SYN标志置为1，接着发送第一个SYN包给服务端，表示发起连接，之后客户端处于SYN-SENT状态。
- 服务端收到来自客户端的SYN包后，首先服务端也随机初始化序列号server-isn，将序号置于TCP首部，然后把TCP首部中的确认号的字段中填入client-isn + 1，并将ACK和SYN标志置为1，然后把该报文发送给客户端，服务端进入SYN-RCVD状态。
- 客户端收到来自服务端的报文后，将TCP首部中的ACK标志置为1，且在确认字段中填入server-isn + 1，最后把报文发送给服务端，这次的报文可以携带从客户到服务端的数据，之后客户端处于ESTABLISHED状态。
- 服务端收到应答报文后，也进入ESTABLISHED状态。

从上述过程中可以发现，第三次握手是可以携带数据的，前两次握手不携带数据。

## TCP四次挥手
